<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="common/css/sf.css" rel="stylesheet" type="text/css"/>
<title>論理の基礎</title>
</head>
<link href="common/jquery-ui/jquery-ui.css" rel="stylesheet">
<script src="common/jquery-ui/external/jquery/jquery.js"></script>
<script src="common/jquery-ui/jquery-ui.js"></script>
<script src="common/toggleproofs.js"></script>
<link href="common/css/lf.css" rel="stylesheet" type="text/css"/>

<body>

<div id="page">

<div id="header">
<a href='../index.html'>
<img src='common/media/image/sf_logo_sm.png'></a>
</br><a href='index.html'><span class='booktitleinheader'>第 1 巻: 論理の基礎</span></a><br></br>
<ul id='menu'>
   <a href='toc.html'><li class='section_name'>目次</li></a>
   <a href='coqindex.html'><li class='section_name'>索引</li></a>
   <a href='deps.html'><li class='section_name'>全体図</li></a>
</ul>
</div>

<div id="main">
<h1 class="libtitle">Induction: 帰納法による証明</h1>

<div class="code">
</div>

<div class="doc">

</div>
<div class="code">

<br/>
</div>

<div class="doc">
始める前に、前の章の定義をここに持ってきます。 
</div>
<div class="code">

<br/>
<span class="id" title="var">From</span> <span class="id" title="var">LF</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="Basics.html#"><span class="id" title="library">Basics</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="keyword">Require</span></span> <span class="inlinecode"><span class="id" title="keyword">Export</span></span>を動かすには、<span class="inlinecode"><span class="id" title="var">Basics.v</span></span>をコンパイルしてできる<span class="inlinecode"><span class="id" title="var">Basics.vo</span></span>を、<span class="inlinecode"><span class="id" title="var">LF</span></span>という名称と結びついたフォルダに配置する必要があります。
    ちょうど <span class="inlinecode">.<span class="id" title="var">java</span></span> のファイルから <span class="inlinecode">.<span class="id" title="var">class</span></span> を作ったり、 <span class="inlinecode">.<a class="idref" href="IndProp.html#c"><span class="id" title="definition">c</span></a></span> のファイルから <span class="inlinecode">.<a class="idref" href="Basics.html#o"><span class="id" title="variable">o</span></a></span> を作ったりするのと同じです。

<div class="paragraph"> </div>

    まず、<span class="inlinecode"><span class="id" title="var">_CoqProject</span></span>という名前のファイルの最初に、次の一行を追加します。
    （もしこの「論理の基礎」全体を持っているならば、<span class="inlinecode"><span class="id" title="var">_CoqProject</span></span>は存在するはずですので、この手順は飛ばしてかまいません。）
<pre>
      -Q . LF
</pre>
    この記述で今いるフォルダ（<span class="inlinecode"><span class="id" title="var">Basics.v</span></span>や<span class="inlinecode"><span class="id" title="var">Induction.v</span></span>などが入っている"<span class="inlinecode">.</span>"）を"<span class="inlinecode"><span class="id" title="var">LF</span></span>"と関連付けます。
    PG（Proof General）やCoqIDEは<span class="inlinecode"><span class="id" title="var">_CoqProject</span></span>を自動で読み取るので、<span class="inlinecode"><span class="id" title="var">LF.Basics</span></span>というライブラリについて<span class="inlinecode"><span class="id" title="var">Basics.vo</span></span>をどこから探せばよいかがわかるようになります。

<div class="paragraph"> </div>

    一度<span class="inlinecode"><span class="id" title="var">_CoqProject</span></span>を作っておけば、様々な方法で<span class="inlinecode"><span class="id" title="var">Basics.vo</span></span>を作成できます。

<div class="paragraph"> </div>

<ul class="doclist">
<li> Proof Generalで：Emacsの変数<span class="inlinecode"><span class="id" title="var">coq</span>-<span class="id" title="var">compile</span>-<span class="id" title="keyword">before</span>-<span class="id" title="var">require</span></span>を<span class="inlinecode"><a class="idref" href="ImpParser.html#t"><span class="id" title="variable">t</span></a></span>に設定することで、<span class="inlinecode"><span class="id" title="keyword">Require</span></span>をPGに読み込ませたときに自動的に作成されます。

<div class="paragraph"> </div>


</li>
<li> CoqIDEで：<span class="inlinecode"><span class="id" title="var">Basics.v</span></span>を開き、メニューの"Compile"から"Compile Buffer"を選びます。

<div class="paragraph"> </div>


</li>
<li> コマンドラインで：まずCoqに付随するツール<span class="inlinecode"><span class="id" title="var">coq_makefile</span></span>を使って以下のようにして<span class="inlinecode"><span class="id" title="var">Makefile</span></span>を作ります。
      （「論理の基礎」全体を持っているならば既に存在するはずですので、この手順は飛ばしてかまいません。）
      （訳注：翻訳版では<span class="inlinecode"><span class="id" title="var">coq_makefile</span></span>が作る<span class="inlinecode"><span class="id" title="var">Makefile</span></span>をカスタマイズしているので、この手順を行うと挙動が変わってしまいます。）

<div class="paragraph"> </div>

        <span class="inlinecode"><span class="id" title="var">coq_makefile</span></span> <span class="inlinecode">-<a class="idref" href="Basics.html#f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><span class="id" title="var">_CoqProject</span></span> <span class="inlinecode">*.<a class="idref" href="Lists.html#v"><span class="id" title="variable">v</span></a></span> <span class="inlinecode">-<a class="idref" href="Basics.html#o"><span class="id" title="variable">o</span></a></span> <span class="inlinecode"><span class="id" title="var">Makefile</span></span> 

<div class="paragraph"> </div>

      メモ：自分でファイルを追加したり削除したりする場合は上のコマンドを再実行して<span class="inlinecode"><span class="id" title="var">Makefile</span></span>を更新しなければなりません。

<div class="paragraph"> </div>

      あとは<span class="inlinecode"><span class="id" title="var">Basic.vo</span></span>を作るために<span class="inlinecode"><span class="id" title="var">make</span></span>コマンドのターゲットとして指定します。

<div class="paragraph"> </div>

        <span class="inlinecode"><span class="id" title="var">make</span></span> <span class="inlinecode"><span class="id" title="var">Basics.vo</span></span> 

<div class="paragraph"> </div>

      全てのファイルをコンパイルしたければ、何も引数を入れずに<span class="inlinecode"><span class="id" title="var">make</span></span>コマンドを使います。

<div class="paragraph"> </div>

        <span class="inlinecode"><span class="id" title="var">make</span></span> 

<div class="paragraph"> </div>

      内部では<span class="inlinecode"><span class="id" title="var">make</span></span>コマンドはCoqのコンパイラである<span class="inlinecode"><span class="id" title="var">coqc</span></span>を使います。
      直接<span class="inlinecode"><span class="id" title="var">coqc</span></span>を使って、次のようにコンパイルすることもできます。

<div class="paragraph"> </div>

        <span class="inlinecode"><span class="id" title="var">coqc</span></span> <span class="inlinecode">-<a class="idref" href="Logic.html#Q"><span class="id" title="variable">Q</span></a></span> <span class="inlinecode">.</span> <span class="inlinecode"><span class="id" title="var">LF</span></span> <span class="inlinecode"><span class="id" title="var">Basics.v</span></span> 

<div class="paragraph"> </div>

      しかし、<span class="inlinecode"><span class="id" title="var">make</span></span>はコンパイルする以外にもソースファイルの依存関係を解析して必要なファイルを適切な順序でコンパイルしてくれるので、<span class="inlinecode"><span class="id" title="var">coqc</span></span>を直接使うより<span class="inlinecode"><span class="id" title="var">make</span></span>コマンドの方がよいでしょう。

</li>
</ul>

<div class="paragraph"> </div>

    もし識別子が見つからないなどのエラーが出たりしたら、Coqの"load path"が正しく設定されていないせいかもしれません。
    <span class="inlinecode"><span class="id" title="keyword">Print</span></span> <span class="inlinecode"><span class="id" title="var">LoadPath</span>.</span>というコマンドで正しく設定されているか確認してみてください。

<div class="paragraph"> </div>

    特に、

<div class="paragraph"> </div>

        <span class="inlinecode"><span class="id" title="var">Compiled</span></span> <span class="inlinecode"><span class="id" title="var">library</span></span> <span class="inlinecode"><span class="id" title="var">Foo</span></span> <span class="inlinecode"><span class="id" title="var">makes</span></span> <span class="inlinecode"><span class="id" title="var">inconsistent</span></span> <span class="inlinecode"><span class="id" title="var">assumptions</span></span> <span class="inlinecode"><span class="id" title="var">over</span></span> <span class="inlinecode"><span class="id" title="var">library</span></span> <span class="inlinecode"><span class="id" title="var">Bar</span></span>

<div class="paragraph"> </div>

    というメッセージが表示される場合、Coqが複数インストールされていないか確認してください。
    入っていた場合、ターミナルからコマンドとして使っているCoq（<span class="inlinecode"><span class="id" title="var">coqc</span></span>など）とProof GeneralやCoqIDEが使っているCoqが異なる可能性があります。

<div class="paragraph"> </div>

<ul class="doclist">
<li> もう一つ、<span class="inlinecode"><span class="id" title="var">Foo</span></span>を再コンパイルせずに<span class="inlinecode"><span class="id" title="var">Bar</span></span>が変更されてコンパイルされた場合などにも発生します。
      <span class="inlinecode"><span class="id" title="var">Foo</span></span>を再コンパイルするか、いろんなファイルが影響するようなら全体を再コンパイルしてください。
      （3つ目の方法である<span class="inlinecode"><span class="id" title="var">make</span></span>を使って <span class="inlinecode"><span class="id" title="var">make</span></span> <span class="inlinecode"><span class="id" title="var">clean</span>;</span> <span class="inlinecode"><span class="id" title="var">make</span></span> を実行します。）

</li>
</ul>

<div class="paragraph"> </div>

   もう一点CoqIDEユーザへ：
   もし<span class="inlinecode"><span class="id" title="var">Error</span>:</span> <span class="inlinecode"><span class="id" title="var">Unable</span></span> <span class="inlinecode"><span class="id" title="var">to</span></span> <span class="inlinecode"><span class="id" title="var">locate</span></span> <span class="inlinecode"><span class="id" title="var">library</span></span> <span class="inlinecode"><span class="id" title="library">Basics</span></span> というメッセージが表示される場合、「CoqIDE内」のコンパイルと「ターミナル上の<span class="inlinecode"><span class="id" title="var">coqc</span></span>」のコンパイルによる不整合が考えられます。
   よくある原因としては、互換性のない二つのバージョンの<span class="inlinecode"><span class="id" title="var">coqc</span></span>（一方はCoqIDEから使われ、もう一方はターミナルから使用されている）が存在するというものです。
   この場合、常にコンパイルをCoqIDEからのみ（例えば"make"をメニューから選んで）コンパイルし、ターミナルから呼び出さないようにしましょう。 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab48"></a><h1 class="section">帰納法による証明</h1>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
前の章では、<span class="inlinecode">0</span>が<span class="inlinecode">+</span>に対する左単位元であることを証明しました。
    実際には、<span class="inlinecode">0</span>は「右(<i>right</i>)」単位元でもあるのですが... 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_n_O_firsttry"><span class="id" title="lemma">plus_n_O_firsttry</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> 0.<br/>

<br/>
</div>

<div class="doc">
... しかし、これは左単位元ほど簡単には示せません。
  <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>を使ってもうまくいきません。
  というのも、<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode">0</span>にある<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>はよく分からない数なので、<span class="inlinecode">+</span>の定義における<span class="inlinecode"><span class="id" title="keyword">match</span></span>は簡約されないのです。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>を使った場合分けもやはり先には進められません。
    <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>のときはいいのですが、<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span>のときは同じ理由で詰まってしまいます。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_n_O_secondtry"><span class="id" title="lemma">plus_n_O_secondtry</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. &nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span>を使って進められますが、<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>がいくらでも大きくなりうるので、このやり方ではいつまで経っても終わりません。 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
これらの、大体の数やリストなどの帰納的に定義された集合に関する性質を示すには、より強力な道具、「帰納法(<i>induction</i>)」が必要になります。

<div class="paragraph"> </div>

    高校や離散数学の講義などで習ったと思いますが、「自然数に関する帰納法（数学的帰納法）の原理」をおさらいしておきましょう。
    もし<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)</span>が自然数<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>に関する命題だったとすると、任意の数<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>に対し<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a></span>が成り立つことを、次のように示すのでした。
<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Basics.html#NatPlayground.O"><span class="id" title="constructor">O</span></a>)</span>が成り立つことを示す。

</li>
<li> どんな<span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span>についても、<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a>)</span>が成り立つならば、<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a>)</span>が成り立つことを示す。

</li>
<li> 以上から、任意の<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>について<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)</span>が成り立つと言える。

</li>
</ul>

<div class="paragraph"> </div>

    Coqではこれを同じようにします。
    任意の<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>で<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)</span>が成り立つことをゴールとして示すときに、それを（<span class="inlinecode"><span class="id" title="tactic">induction</span></span>タクティックを使うことで）、二つのサブゴールに分けます。
    一つ目は<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Basics.html#NatPlayground.O"><span class="id" title="constructor">O</span></a>)</span>の証明、そして次は<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a>)</span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a>(<a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a>)</span>の証明です。
    どのようになるのかを例を使って見ていきましょう。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_n_O"><span class="id" title="lemma">plus_n_O</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n'</span> <span class="id" title="var">IHn'</span>].<br/>
&nbsp;&nbsp;-     <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHn'</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">destruct</span></span>タクティックと同様に、<span class="inlinecode"><span class="id" title="tactic">induction</span></span>タクティックには、サブゴールで使う変数を指定する<span class="inlinecode"><span class="id" title="keyword">as</span>...</span>節を使うことができます。
    二つに分かれているので、<span class="inlinecode"><span class="id" title="keyword">as</span>...</span>節も<span class="inlinecode">|</span>で二つに分かれています。
    （厳密に言うと、ここでは<span class="inlinecode"><span class="id" title="keyword">as</span>...</span>節は省略できて、その場合Coqが名前を付けてくれます。
    ただし、実際には、これはあまりいい方法ではありません。
    というのも、Coqが自動で付ける名前では混乱しがちだからです。）

<div class="paragraph"> </div>

    一つ目のサブゴールでは、<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>は<span class="inlinecode">0</span>に置き換えられています。
    新しい変数は特に導入されていません（そのため<span class="inlinecode"><span class="id" title="keyword">as</span>...</span>の一つ目は空になっています）。
    ゴールは<span class="inlinecode">0</span> <span class="inlinecode">=</span> <span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode">0</span>となっていて、これは簡約すれば示せます。

<div class="paragraph"> </div>

    二つ目のサブゴールでは、<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>は<span class="inlinecode"><a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span>に置き換えられ、仮定として<span class="inlinecode"><span class="id" title="var">IHn'</span></span>という名前（つまり<span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span>に関する帰納法の仮定(Induction Hypothesis)）で<span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode">0</span>が文脈に追加されます。
    <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span>と<span class="inlinecode"><span class="id" title="var">IHn'</span></span>という二つの名前は<span class="inlinecode"><span class="id" title="keyword">as</span>...</span>節の二つ目で指定しています。
    ゴールは<span class="inlinecode"><a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode">(<a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a>)</span> <span class="inlinecode">+</span> <span class="inlinecode">0</span>となっていますが、簡約すると<span class="inlinecode"><a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode">(<a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode">0)</span>になります。
    これは帰納法の仮定である<span class="inlinecode"><span class="id" title="var">IHn'</span></span>から示せます。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="minus_diag"><span class="id" title="lemma">minus_diag</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#minus"><span class="id" title="abbreviation">minus</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n'</span> <span class="id" title="var">IHn'</span>].<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">IHn'</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
（実のところ、上の証明では<span class="inlinecode"><span class="id" title="tactic">intros</span></span>タクティクは冗長です。
    量化変数を持つゴールに対して<span class="inlinecode"><span class="id" title="tactic">induction</span></span>タクティクを適用すると、これらの変数は必要に応じて文脈に移動されます。） 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab49"></a><h4 class="section">練習問題: ★★, standard, recommended (basic_induction)</h4>


<div class="paragraph"> </div>

    以下の定理を帰納法で証明しなさい。
    証明には、前に示した内容を使う必要があるかもしれません。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="mult_0_r"><span class="id" title="lemma">mult_0_r</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_n_Sm"><span class="id" title="lemma">plus_n_Sm</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_comm"><span class="id" title="lemma">plus_comm</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_assoc"><span class="id" title="lemma">plus_assoc</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab50"></a><h4 class="section">練習問題: ★★, standard (double_plus)</h4>


<div class="paragraph"> </div>

    次のように、引数を二倍にする関数を定義します。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="double"><span class="id" title="definition">double</span></a> (<span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Induction.html#double"><span class="id" title="definition">double</span></a> <span class="id" title="var">n'</span>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
帰納法を使って、<span class="inlinecode"><a class="idref" href="Induction.html#double"><span class="id" title="definition">double</span></a></span>に関する以下の性質を証明しなさい。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="double_plus"><span class="id" title="lemma">double_plus</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <a class="idref" href="Induction.html#double"><span class="id" title="definition">double</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab51"></a><h4 class="section">練習問題: ★★, standard, optional (evenb_S)</h4>


<div class="paragraph"> </div>

    <span class="inlinecode"><a class="idref" href="Basics.html#evenb"><span class="id" title="definition">evenb</span></a></span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>の定義の不便な点は、再帰呼び出しが<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">-</span> <span class="inlinecode">2</span>に対して行われているというものです。
    これにより、<span class="inlinecode"><a class="idref" href="Basics.html#evenb"><span class="id" title="definition">evenb</span></a></span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>に関する性質の証明を<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>に基づく帰納法で行う場合に、再帰呼び出しに関する性質を得るには<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">-</span> <span class="inlinecode">2</span>に対する仮定が必要となります。
    このため、そのままでは帰納法で示すことが難しくなっています。
    次の補題は<span class="inlinecode"><a class="idref" href="Basics.html#evenb"><span class="id" title="definition">evenb</span></a></span> <span class="inlinecode">(<a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)</span>の特徴付けを行っています。
    これを用いることで、帰納法での扱いが容易になります。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="evenb_S"><span class="id" title="lemma">evenb_S</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#evenb"><span class="id" title="definition">evenb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="Basics.html#evenb"><span class="id" title="definition">evenb</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab52"></a><h4 class="section">練習問題: ★, standard (destruct_induction)</h4>


<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="tactic">destruct</span></span>と<span class="inlinecode"><span class="id" title="tactic">induction</span></span>の違いについて大まかに説明しなさい。

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="manual_grade_for_destruct_induction"><span class="id" title="definition">manual_grade_for_destruct_induction</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab53"></a><h1 class="section">証明の中の証明</h1>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
Coqでは、通常の数学のように、大きな証明を複数の定理の列に分割して、後ろの証明で前の定理を利用する、ということをします。
    しかし、このように分割した定理の中には、内容が自明だったり全く一般的でなかったりするため、全体に見える名前を付けるのが面倒になるものも現れます。
    こういう場合、その場所でだけ使うように「副定理」を記述、証明できると便利です。
    これを可能にするのが<span class="inlinecode"><span class="id" title="tactic">assert</span></span>タクティックです。
    例えば、前に証明した<span class="inlinecode"><a class="idref" href="Basics.html#mult_0_plus"><span class="id" title="lemma">mult_0_plus</span></a></span>という定理では<span class="inlinecode"><a class="idref" href="Basics.html#plus_O_n"><span class="id" title="lemma">plus_O_n</span></a></span>という名前の定理を使っていました。
    これを<span class="inlinecode"><span class="id" title="tactic">assert</span></span>を使い、<span class="inlinecode"><a class="idref" href="Basics.html#plus_O_n"><span class="id" title="lemma">plus_O_n</span></a></span>の記述と証明を書くと次のようになります。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="mult_0_plus'"><span class="id" title="lemma">mult_0_plus'</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">(</span></a>0 <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>: 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">n</span>). { <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">assert</span></span>タクティックは二つのサブゴールを作ります。
    一つ目は表明したものそのものです。
    <span class="inlinecode"><a class="idref" href="ProofObjects.html#H"><span class="id" title="variable">H</span></a>:</span>という記述は、表明したものを<span class="inlinecode"><a class="idref" href="ProofObjects.html#H"><span class="id" title="variable">H</span></a></span>と名付けることを意味します。
    （<span class="inlinecode"><span class="id" title="tactic">destruct</span></span>や<span class="inlinecode"><span class="id" title="tactic">induction</span></span>同様に、<span class="inlinecode"><span class="id" title="keyword">as</span></span>を使って<span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode">(0</span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)</span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode"><a class="idref" href="ProofObjects.html#H"><span class="id" title="variable">H</span></a></span>と書くこともできます。）
    ここで、表明の証明を波括弧<span class="inlinecode">{</span> <span class="inlinecode">...</span> <span class="inlinecode">}</span>で囲ったのは、可読性のためという理由の他に、Coqの対話環境では、この部分の証明が終わったことがわかりやすくなるという理由もあります。
    二つ目のゴールは<span class="inlinecode"><span class="id" title="tactic">assert</span></span>を実行したものと同じですが、文脈に<span class="inlinecode"><a class="idref" href="ProofObjects.html#H"><span class="id" title="variable">H</span></a></span>という名前で<span class="inlinecode">0</span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>の仮定が入っています。
    つまり、<span class="inlinecode"><span class="id" title="tactic">assert</span></span>は一つのサブゴールで表明した内容を証明させ、二つ目のサブゴールで元の場所に戻り、表明した内容を使って証明を進めさせるのです。 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">assert</span></span>の他の使用例です。 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
例えば、<span class="inlinecode">(<a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>)</span> <span class="inlinecode">+</span> <span class="inlinecode">(<a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Induction.html#q"><span class="id" title="variable">q</span></a>)</span> <span class="inlinecode">=</span> <span class="inlinecode">(<a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)</span> <span class="inlinecode">+</span> <span class="inlinecode">(<a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Induction.html#q"><span class="id" title="variable">q</span></a>)</span>を示す必要があったとします。
    <span class="inlinecode">=</span>の左右での差は<span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span>と<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>の位置が<span class="inlinecode">+</span>の間で入れ替わっているだけですから、加算の可換律（<span class="inlinecode"><a class="idref" href="Induction.html#plus_comm"><span class="id" title="lemma">plus_comm</span></a></span>）で書き換えれば簡単に示せるはずです。
    ただ、<span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>タクティックは「どこを」書き換えるかに関してはあまり賢くないので、今回は<span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><a class="idref" href="Induction.html#plus_comm"><span class="id" title="lemma">plus_comm</span></a></span>を実行しても、3箇所存在する<span class="inlinecode">+</span>のうち「外側」のものを書き換えてしまいます。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_rearrange_firsttry"><span class="id" title="lemma">plus_rearrange_firsttry</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="Induction.html#plus_comm"><span class="id" title="axiom">plus_comm</span></a>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="Induction.html#plus_comm"><span class="id" title="lemma">plus_comm</span></a></span>を必要な場所に使うために、<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>（ただし<span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span>と<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>は今の文脈にある変数）を<span class="inlinecode"><span class="id" title="tactic">assert</span></span>を使って補題として作る方法があります。
    この補題を<span class="inlinecode"><a class="idref" href="Induction.html#plus_comm"><span class="id" title="lemma">plus_comm</span></a></span>で示し、それを使って意図通りに式を書き換えるのです。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_rearrange"><span class="id" title="lemma">plus_rearrange</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>: <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="Induction.html#plus_comm"><span class="id" title="axiom">plus_comm</span></a>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab54"></a><h1 class="section">形式的証明　対　非形式的証明</h1>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
「非形式的証明はアルゴリズムで、形式的証明はコードだ。」 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
数学的な言明に対して「よい証明」とは一体何でしょうか？この
    問いは、数千年に渡り議論されていますが、大まかに合意されている定義は次のようになります。
    「数学的命題<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a></span>に対する証明とは、読み手（聞き手）が確かに<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a></span>は正しいと信じるに足るような記述（発言）、すなわち<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a></span>の正しさを否定できないような議論である。」
    つまり、証明とはコミュニケーションであるということです。

<div class="paragraph"> </div>

    コミュニケーションは、様々な「読み手」と行われます。
    あるときには、この「読み手」はCoqのようなプログラムでしょう。
    この場合、信じさせるための「信条」は<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a></span>が形式的に定義された論理規則から導出できるということであり、証明はこれを確かめるためにプログラムを案内するレシピということになります。
    このレシピを「形式的(<i>formal</i>)」証明といいます。

<div class="paragraph"> </div>

    また別のときには、「読み手」が人間であることもあるでしょう。
    この場合、証明は英語や日本語などの自然言語で書かれることになり、結果として「非形式的(<i>informal</i>)」になります。
    こちらは、コミュニケーション時の戦略はそこまではっきりとはしません。
    「妥当な」証明ならば、読み手が<span class="inlinecode"><a class="idref" href="Logic.html#P"><span class="id" title="variable">P</span></a></span>を信じるでしょう。
    しかし、読み手には、ある特定の書き方でないと信じない人もいれば、その書き方では信じられない人もいます。
    もしその読み手が、特別融通が利かなかったり、過度に未熟だったり、頭の回転が非常に鈍い人だったりすると、信じさせるには綿密に詳細を記述しなければならないでしょう。
    一方で、その分野に詳しい人がその証明を読んだ場合、あまりの詳細の記述に全体の流れを追えなくなってしまうでしょう。
    そのような読み手が知りたいのは証明における主なアイディアです。
    なぜなら、その人にとっては、ひたすら書かれた記述を理解するよりも、細部を自分で埋める方が楽なのです。
    究極的には、証明の記述方法の普遍的標準などありません。
    あり得る読み手全員が信じるに足るような非形式的証明の記述方法が存在しないからです。

<div class="paragraph"> </div>

    ただし実際には、複雑な内容を記述するための、多彩な慣習や慣用表現が作られています。
    これらを用いることで、少なくとも特定のコミュニティの中では、コミュニケーションをかなり円滑に進めることができます。
    こう言った慣習は、かなり明確に証明の良し悪しを判定する基準があります。

<div class="paragraph"> </div>

    この講義ではCoqを使っていますので、かなり形式的証明を扱うことになります。
    しかし、だからといって非形式的証明を忘れていいわけではありません！
    形式的証明は様々な点で有用なのですが、他の人とアイディアを交わしたりといったことには全くもって非効率的です。 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
例えば、次の証明は加算が結合的であることを示しています。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_assoc'"><span class="id" title="lemma">plus_assoc'</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n'</span> <span class="id" title="var">IHn'</span>]. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">IHn'</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
この証明はCoqにとっては完璧です。
    しかし人間からすると、直観的に理解することは難しいものです。
    コメントやbulletを使って証明の構成を記述すれば、少し読みやすくなります。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_assoc''"><span class="id" title="lemma">plus_assoc''</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n'</span> <span class="id" title="var">IHn'</span>].<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> -&gt; <span class="id" title="var">IHn'</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Coqに慣れている人なら、タクティックを一つずつ進めるように文脈とゴールを頭の中に作ることも可能かもしれません。
    しかし、ほんの少し証明が複雑になるだけでほぼ不可能になります。

<div class="paragraph"> </div>

    （こと細かな）数学者がこの証明を書くとしたら、大体次のようになるでしょう。 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> 定理： 任意の<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>、<span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span>、<span class="inlinecode"><a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a></span>について、以下が成立する。
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a> + (<a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>) = (<a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a> + <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>.
<div class="paragraph"> </div>

</span>    証明： <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>に関する帰納法による。

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>の場合、示す命題は
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 + (<a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>) = (0 + <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>
<div class="paragraph"> </div>

</span>      である。これは<span class="inlinecode">+</span>の定義から明らかである。

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a></span>の場合で、帰納法の仮定として
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a> + (<a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>) = (<a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a> + <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>
<div class="paragraph"> </div>

</span>      が成り立つとする。示す命題は
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a>) + (<a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>) = ((<a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a>) + <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>
<div class="paragraph"> </div>

</span>      である。<span class="inlinecode">+</span>の定義より、次の形に変形される。
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a> + (<a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>)) = <a class="idref" href="Basics.html#NatPlayground.S"><span class="id" title="constructor">S</span></a> ((<a class="idref" href="Logic.html#n'"><span class="id" title="variable">n'</span></a> + <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) + <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>)
<div class="paragraph"> </div>

</span>      これは帰納法の仮定から明らかである。
      証明終了 
</li>
</ul>

</li>
</ul>

</div>
<div class="code">
</div>

<div class="doc">
証明の大まかな形式は似ていますが、当然これは偶然ではありません。
    Coqの<span class="inlinecode"><span class="id" title="tactic">induction</span></span>は、数学者版の箇条書きされたものと同じサブゴールを、同じ順で作るように設定されています。
    しかし、細部は大きく違います。
    形式的証明ではいくつかの手順がより明示的になっています（例えば<span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>の使用など）が、逆に明示されていない箇所もあります（特に「証明する命題」はCoqの証明上には全く現れませんが、非形式的証明では現状確認のために明示されています）。 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab55"></a><h4 class="section">練習問題: ★★, advanced, recommended (plus_comm_informal)</h4>


<div class="paragraph"> </div>

    <span class="inlinecode"><a class="idref" href="Induction.html#plus_comm"><span class="id" title="lemma">plus_comm</span></a></span>の（課題として解いた）証明を非形式的証明で書きなさい。

<div class="paragraph"> </div>

    定理： 加算は可換律を満たす。

<div class="paragraph"> </div>

    証明：  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="manual_grade_for_plus_comm_informal"><span class="id" title="definition">manual_grade_for_plus_comm_informal</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab56"></a><h4 class="section">練習問題: ★★, standard, optional (beq_nat_refl_informal)</h4>


<div class="paragraph"> </div>

    <span class="inlinecode"><a class="idref" href="Induction.html#plus_assoc"><span class="id" title="lemma">plus_assoc</span></a></span>の非形式的証明を参考に、次の定理の非形式的証明を書きなさい。
    Coqのタクティックを日本語に変換するだけではだめです！

<div class="paragraph"> </div>

    定理： 任意の<span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>について、<span class="inlinecode"><a class="idref" href="Basics.html#true"><span class="id" title="constructor">true</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">=?</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>が成立する。

<div class="paragraph"> </div>

    証明： 
<div class="paragraph"> </div>

    <font size=-2>&#9744;</font>  
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab57"></a><h1 class="section">発展課題</h1>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab58"></a><h4 class="section">練習問題: ★★★, standard, recommended (mult_comm)</h4>


<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="tactic">assert</span></span>を使い、次の定理を示しなさい。
    ここでは<span class="inlinecode"><a class="idref" href="Induction.html#plus_swap"><span class="id" title="lemma">plus_swap</span></a></span>に対して<span class="inlinecode"><span class="id" title="tactic">induction</span></span>を使ってはいけません。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_swap"><span class="id" title="lemma">plus_swap</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
次に乗算の可換律を示しなさい。
    （補助定理を一つ示す必要があるでしょう。
    <span class="inlinecode"><a class="idref" href="Induction.html#plus_swap"><span class="id" title="lemma">plus_swap</span></a></span>を使うといいかもしれません。） 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="mult_comm"><span class="id" title="lemma">mult_comm</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab59"></a><h4 class="section">練習問題: ★★★, standard, optional (more_exercises)</h4>


<div class="paragraph"> </div>

    紙を準備し、以下の定理のそれぞれに対して、
    (a)簡約と書き換えだけで示せるか、
    (b)場合分け（<span class="inlinecode"><span class="id" title="tactic">destruct</span></span>）が必要か、
    (c)帰納法が必要か、
    を考え、その予想を書きなさい。
    それが終わったら、実際に証明しなさい。
    （紙に書いた予想をコード中に書いたりしなくて構いません。
    手を動かす前に一度考えてもらうために使ったのです。） 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="Basics.html#leb"><span class="id" title="definition">leb</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="leb_refl"><span class="id" title="lemma">leb_refl</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Basics.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="zero_nbeq_S"><span class="id" title="lemma">zero_nbeq_S</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;0 <a class="idref" href="Basics.html#97a8d8c92e88d1d68fb55a13a4fcfc6d"><span class="id" title="notation">=?</span></a> <a class="idref" href="Basics.html#97a8d8c92e88d1d68fb55a13a4fcfc6d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Basics.html#97a8d8c92e88d1d68fb55a13a4fcfc6d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="andb_false_r"><span class="id" title="lemma">andb_false_r</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> : <a class="idref" href="Basics.html#bool"><span class="id" title="inductive">bool</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#andb"><span class="id" title="definition">andb</span></a> <a class="idref" href="Induction.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Basics.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_ble_compat_l"><span class="id" title="lemma">plus_ble_compat_l</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Basics.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Basics.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Basics.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">)</span></a> <a class="idref" href="Basics.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Basics.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="Basics.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="S_nbeq_0"><span class="id" title="lemma">S_nbeq_0</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#97a8d8c92e88d1d68fb55a13a4fcfc6d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="Basics.html#97a8d8c92e88d1d68fb55a13a4fcfc6d"><span class="id" title="notation">)</span></a> <a class="idref" href="Basics.html#97a8d8c92e88d1d68fb55a13a4fcfc6d"><span class="id" title="notation">=?</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="mult_1_l"><span class="id" title="lemma">mult_1_l</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="all3_spec"><span class="id" title="lemma">all3_spec</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <a class="idref" href="Basics.html#bool"><span class="id" title="inductive">bool</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Basics.html#orb"><span class="id" title="definition">orb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Basics.html#andb"><span class="id" title="definition">andb</span></a> <a class="idref" href="Induction.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="Induction.html#c"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Basics.html#orb"><span class="id" title="definition">orb</span></a> (<a class="idref" href="Basics.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="Induction.html#b"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Basics.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="Induction.html#c"><span class="id" title="variable">c</span></a>))<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="mult_plus_distr_r"><span class="id" title="lemma">mult_plus_distr_r</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="mult_assoc"><span class="id" title="lemma">mult_assoc</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">*</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab60"></a><h4 class="section">練習問題: ★★, standard, optional (eqb_refl)</h4>


<div class="paragraph"> </div>

    次の定理を示しなさい。
    （<span class="inlinecode"><a class="idref" href="Basics.html#true"><span class="id" title="constructor">true</span></a></span>を等号の左辺に置くのは奇妙に見えるかもしれませんが、これは標準ライブラリにある定理に合わせたためです。
    書き換えは両方向で可能なので、どちらで記述しても問題はありません。） 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="eqb_refl"><span class="id" title="lemma">eqb_refl</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Basics.html#97a8d8c92e88d1d68fb55a13a4fcfc6d"><span class="id" title="notation">=?</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab61"></a><h4 class="section">練習問題: ★★, standard, optional (plus_swap')</h4>


<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="tactic">replace</span></span>タクティックは、特定の部分式を指定した別の式に書き換えるのに使います。
   <span class="inlinecode"><span class="id" title="tactic">replace</span></span> <span class="inlinecode">(<a class="idref" href="ImpParser.html#t"><span class="id" title="variable">t</span></a>)</span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode">(<span class="id" title="var">u</span>)</span>の形で、ゴールに存在する<span class="inlinecode"><a class="idref" href="ImpParser.html#t"><span class="id" title="variable">t</span></a></span>を全て<span class="inlinecode"><span class="id" title="var">u</span></span>に書き換え、サブゴールとして<span class="inlinecode"><a class="idref" href="ImpParser.html#t"><span class="id" title="variable">t</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">u</span></span>を作ります。
   <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>での書き換えが意図通りに行えないときに便利です。

<div class="paragraph"> </div>

   <span class="inlinecode"><span class="id" title="tactic">replace</span></span>を使って次の<span class="inlinecode"><a class="idref" href="Induction.html#plus_swap'"><span class="id" title="lemma">plus_swap'</span></a></span>を証明しなさい。
   証明はほとんど<span class="inlinecode"><a class="idref" href="Induction.html#plus_swap"><span class="id" title="lemma">plus_swap</span></a></span>と同じですが、<span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode">(<a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span> <span class="inlinecode">+</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)</span>を書かないようにしなさい。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="plus_swap'"><span class="id" title="lemma">plus_swap'</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> <span class="id" title="var">p</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Induction.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab62"></a><h4 class="section">練習問題: ★★★, standard, recommended (binary_commute)</h4>


<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="library">Basics</span></span>の章の<span class="inlinecode"><span class="id" title="var">binary</span></span>という課題で書いた、<span class="inlinecode"><span class="id" title="var">increment</span></span>と<span class="inlinecode"><a class="idref" href="Basics.html#bin_to_nat"><span class="id" title="definition">bin_to_nat</span></a></span>関数に関してです。
    以下の図が可換であることを示しなさい。
<pre>
                            incr 
              bin ----------------------&gt; bin 
               |                           | 
    bin_to_nat |                           |  bin_to_nat 
               |                           | 
               v                           v 
              nat ----------------------&gt; nat 
                             S 
</pre>
    つまり、2進数を1増やしてから（1進の）自然数に変換した結果と、変換を先にしてから1増やした結果が一致するということです。
    名前は<span class="inlinecode"><span class="id" title="var">bin_to_nat_pres_incr</span></span>とします（presは保存(preserve)です）。

<div class="paragraph"> </div>

    始める前に、<span class="inlinecode"><span class="id" title="var">binary</span></span>に書いた定義から証明しやすい形に変更しても構いません。 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="manual_grade_for_binary_commute"><span class="id" title="definition">manual_grade_for_binary_commute</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab63"></a><h4 class="section">練習問題: ★★★★★, advanced (binary_inverse)</h4>


<div class="paragraph"> </div>

    この課題は2進数に関する課題の続きで、場合によっては前の定義を変更しなければいけないかもしれません。

<div class="paragraph"> </div>

    (a) まず、自然数から2進数へ変換する関数を書きなさい。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="nat_to_bin"><span class="id" title="definition">nat_to_bin</span></a> (<span class="id" title="var">n</span>:<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="Basics.html#bin"><span class="id" title="inductive">bin</span></a><br/>
&nbsp;&nbsp;. <span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
そして、<span class="inlinecode"><a class="idref" href="Basics.html#NatPlayground.nat"><span class="id" title="inductive">nat</span></a></span>から2進数に変換し、逆に変換した結果が元の<span class="inlinecode"><a class="idref" href="Basics.html#NatPlayground.nat"><span class="id" title="inductive">nat</span></a></span>と一致することを示しなさい。
    （ヒント：もし<span class="inlinecode"><a class="idref" href="Induction.html#nat_to_bin"><span class="id" title="definition">nat_to_bin</span></a></span>の定義に別の関数を利用しているならば、その関数がどのように<span class="inlinecode"><a class="idref" href="Induction.html#nat_to_bin"><span class="id" title="definition">nat_to_bin</span></a></span>と関係しているかの補題を示すひつようがあるでしょう。） 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a name="nat_bin_nat"><span class="id" title="lemma">nat_bin_nat</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <a class="idref" href="Basics.html#bin_to_nat"><span class="id" title="axiom">bin_to_nat</span></a> (<a class="idref" href="Induction.html#nat_to_bin"><span class="id" title="axiom">nat_to_bin</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Induction.html#n"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="manual_grade_for_binary_inverse_a"><span class="id" title="definition">manual_grade_for_binary_inverse_a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc">
(b) 逆方向も示した方がいいのでは？と思うでしょう。
        逆とはつまり、2進数を自然数に変換し、それをまた2進数に戻すと、元の2進数になる、というものです。
        しかし、これは正しくありません。
        なぜそうなるのかを（コメントとして）説明しなさい。 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="manual_grade_for_binary_inverse_b"><span class="id" title="definition">manual_grade_for_binary_inverse_b</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc">
(c) 2進数を「直接」正規化する<span class="inlinecode"><span class="id" title="var">normalize</span></span>関数を定義しなさい。
        <span class="inlinecode"><span class="id" title="var">normalize</span></span>関数は<span class="inlinecode"><a class="idref" href="Basics.html#bin"><span class="id" title="inductive">bin</span></a></span>から<span class="inlinecode"><a class="idref" href="Basics.html#bin"><span class="id" title="inductive">bin</span></a></span>への関数であり、自然数に変換せずに2進数のまま計算を行う関数です。
        2進数<span class="inlinecode"><a class="idref" href="Poly.html#MumbleGrumble.b"><span class="id" title="constructor">b</span></a></span>を自然数に変換してそれを2進数に逆変換すると、<span class="inlinecode"><span class="id" title="var">normalize</span></span> <span class="inlinecode"><a class="idref" href="Poly.html#MumbleGrumble.b"><span class="id" title="constructor">b</span></a></span>と一致しなければなりません。
        これを示しなさい。
        （注意：証明はトリッキーです。
        いくつかの補題を示す必要があるでしょう。
        手順としては、求められた性質について直接証明してみて、詰まった状況を確認し、必要そうな補題を定めて証明を進められることを確認していく、という流れがよいでしょう。
        もちろんその補題を示すには別途帰納法が必要になるでしょう。）
        <span class="inlinecode"><span class="id" title="var">normalize</span></span>を定義するのに <span class="inlinecode"><a class="idref" href="Induction.html#nat_to_bin"><span class="id" title="definition">nat_to_bin</span></a></span> や <span class="inlinecode"><a class="idref" href="Basics.html#bin_to_nat"><span class="id" title="definition">bin_to_nat</span></a></span> を使ってはいけません！ 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="manual_grade_for_binary_inverse_c"><span class="id" title="definition">manual_grade_for_binary_inverse_c</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.8.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">表紙</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a><hr/>
<a href="https://github.com/sfja/sfja">ソフトウェアの基礎 日本語化プロジェクト</a>
</div>

</div>

</body>
</html>
